# Commands and Train Log

## Commands

### English Commands

```sh
python tools/test_shadownet.py --image_path data/samples/chromatophilic\ touchup\ ozonizer\ futurama_9.jpg --weights_path model/checkpoints/en --char_dict_path data/char_dict/char_dict_en.json --ord_map_dict_path data/char_dict/ord_map_en.json --visualize 1
```

### NRC demo

- Data preparation

```sh
python tools/write_tfrecords.py --dataset_dir data/training-demo --save_dir data/training-demo/tfrecords
```

- Training

```sh
python tools/train_shadownet.py --dataset_dir data/training-demo --char_dict_path data/char_dict/char_dict_mm.json --ord_map_dict_path data/char_dict/ord_map_mm.json --model_path model/nrc-demo --weights_path model/nrc-demo
```

- Test

```sh
python tools/test_shadownet.py --image_path data/training-demo/name-YGN12084.1.jpg --char_dict_path data/char_dict/char_dict_mm.json --ord_map_dict_path data/char_dict/ord_map_mm.json --weights_path model/nrc-demo -v 1
```

## Implementation Detail for NRC-OCR

### TODO LIST

- Combine Hand written images with NRC background to generate synthetic data

- Cropped ROI from existing real data and label them.

### Dataset Infomation:

- dataset needs to have following folder structure:

```sh
    images/<All_IMAGES>.<IMAGE_FORMAT>
    annotation_train.txt
    annotation_test.txt
    annotation_value.txt
    lexicon.txt
```

- `lexicon.txt` contains all labels which are seperacted by line in **Burmese**. E.g (sorry, I can't type Burmese)

```sh
9/MANATA(NAING)037281
U KYAN KYOUNG
...etc
```

- `annotation` text files must be in following format.

```sh
  /path/to/image <LEXION_LINE_NUMBER>
```

**Note**: `/path/to/image` must be relative path from **dataset path** specified in script arguments. `<LEXION_LINE_NUMBER>` is just line number that contains corresponding **label** for image in `lexicon.txt`.

- Both `char_dict` and `ord_map` can be generated by following script from `charset` file.
